# Milestone v0.8: Task Management

**Status:** SHIPPED 2026-02-07
**Phases:** 1-7 (+ 6.1 inserted)
**Total Plans:** 20

## Overview

Ripple's task management integration follows a dependency-driven structure: establish project containers with proper RBAC patterns, build stable task CRUD operations, add Kanban visualization with real-time drag-drop, integrate with existing chat/documents/diagrams for cross-feature references, and finish with notifications and commenting. Each phase delivers a coherent, verifiable capability building toward a unified workspace where tasks connect seamlessly with conversations and documents.

## Phases

### Phase 1: Projects Foundation
**Goal**: Users can create and manage projects as containers for tasks with role-based access control
**Depends on**: Nothing (first phase)
**Plans**: 4 plans

Plans:
- [x] 01-01-PLAN.md — Backend schema and API (projects + projectMembers tables, CRUD operations)
- [x] 01-02-PLAN.md — Routes and sidebar integration (navigation, ProjectSelectorList)
- [x] 01-03-PLAN.md — Create dialog and project details page
- [x] 01-04-PLAN.md — Settings page with membership management and verification

### Phase 2: Basic Tasks
**Goal**: Users can create and manage tasks within projects with essential properties
**Depends on**: Phase 1 (tasks require project container)
**Plans**: 4 plans

Plans:
- [x] 02-01-PLAN.md — Backend schema and CRUD (tasks + taskStatuses tables, mutations, queries)
- [x] 02-02-PLAN.md — Task list UI (Badge, TaskRow, CreateTaskInline, Tasks view on project page)
- [x] 02-03-PLAN.md — Task detail side panel (TaskDetailSheet with BlockNote editor, property editing)
- [x] 02-04-PLAN.md — My Tasks cross-project view and sidebar integration

### Phase 3: Kanban Board View
**Goal**: Users can visualize and organize tasks on a real-time collaborative Kanban board
**Depends on**: Phase 2 (Kanban visualizes task status field)
**Plans**: 3 plans

Plans:
- [x] 03-01-PLAN.md — Backend infrastructure (position field, indexes, fractional-indexing, dnd-kit deps)
- [x] 03-02-PLAN.md — Kanban board UI with drag-and-drop (KanbanBoard, KanbanColumn, KanbanCard, view toggle)
- [x] 03-03-PLAN.md — Column management (add, rename, reorder, delete) and visual verification

### Phase 4: Chat-to-Task Integration
**Goal**: Users can capture action items from conversations by creating tasks from messages
**Depends on**: Phase 2 (task creation infrastructure must be stable)
**Plans**: 2 plans

Plans:
- [x] 04-01-PLAN.md — Task creation from message (context menu, popover, context capture, system message)
- [x] 04-02-PLAN.md — Task mentions in chat (# autocomplete, inline chips, live status updates)

### Phase 5: Document & Diagram Embeds
**Goal**: Users can link tasks to documents and diagrams with inline previews
**Depends on**: Phase 2 (tasks need stable rich text descriptions)
**Plans**: 3 plans

Plans:
- [x] 05-01-PLAN.md — Custom inline content types and shared task description schema
- [x] 05-02-PLAN.md — Task description editor upgrade with # and @ autocomplete
- [x] 05-03-PLAN.md — Project references in chat messages

### Phase 6: Task Comments
**Goal**: Users can discuss tasks through threaded comments
**Depends on**: Phase 2 (core task infrastructure must exist)
**Plans**: 1 plan

Plans:
- [x] 06-01-PLAN.md — Backend taskComments CRUD and frontend comment list with inline edit/delete

### Phase 6.1: Mention People in Task Comments (INSERTED)
**Goal**: Users can @mention project members in task comments for targeted communication
**Depends on**: Phase 6 (comments must exist)
**Plans**: 1 plan

Plans:
- [x] 06.1-01-PLAN.md — BlockNote @mention upgrade for task comments (schema, component rewrite, integration)

### Phase 7: Notifications & Polish
**Goal**: Users receive timely notifications for task-related events
**Depends on**: Phases 2, 5, 6, 6.1 (tasks, mentions, and comments must exist)
**Plans**: 2 plans

Plans:
- [x] 07-01-PLAN.md — Notification infrastructure (BlockNote mention extraction utility + task notification internal actions)
- [x] 07-02-PLAN.md — Wire task and comment mutations to schedule notifications for assignments and @mentions

---

## Milestone Summary

**Decimal Phases:**
- Phase 6.1: Mention People in Task Comments (inserted after Phase 6 for @mention support in comments)

**Key Decisions:**
- Projects as separate entity from channels (tasks need container linking to multiple channels)
- Kanban-only for v1 (validate core task model before adding views)
- Project creates auto-channel (every project needs discussion space by default)
- Inline status seeding in mutations (Convex mutations can't call other mutations)
- Freeform string labels for v1 (migrate to label entities later)
- Denormalized completed field on tasks for efficient filtering
- Fractional indexing for Kanban card ordering (no renumbering)
- Four custom BlockNote inline content types (diagrams, documents, users, projects)
- Separate taskCommentSchema with only userMention (lighter than task descriptions)
- Diff-based mention detection for edits (prevents duplicate notifications)

**Issues Resolved:**
- Cross-agent integration gaps (TaskDetailSheet + parallel agent coordination)
- BlockNote onChange suppression for programmatic content loading
- Convex mutation-to-mutation limitation (inline shared logic pattern)
- DragOverlay component reuse via split presentational/draggable pattern

**Technical Debt Incurred:**
- Freeform string labels (should migrate to label entities)
- position field is v.optional() for backward compatibility
- mentionedUserIds stored as v.array(v.string()) not v.array(v.id('users'))

---

_For current project status, see .planning/MILESTONES.md_
